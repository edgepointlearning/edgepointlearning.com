[build]
  ignore = "node ignore_build.js"
  publish = "_dist"
  command = "npm run build"


# POST BUILD OPTIMIZATIONS
[build.processing]
  skip_processing = false
[build.processing.css]
  bundle = true
  minify = false # todo: temporary bugfix for https://github.com/tailwindlabs/tailwindcss/discussions/7044
[build.processing.js]
  bundle = true
  minify = true
[build.processing.html]
  pretty_urls = false
[build.processing.images]
  compress = false


# NETLIFY PLUGINS
[[plugins]]
  package = "netlify-plugin-cache"
  [plugins.inputs]
    paths = [
      "_dist/img/opt", # Eleventy-Image Disk Cache
      ".cache" # Remote Asset Cache (not used currently)
    ]

# [[plugins]]
#   package = "netlify-plugin-subfont"
#   [plugins.inputs]
#     # An array of glob patterns for pages on your site
#     # Recursive traversal will start from these
#     entryPoints = [
#       "*.html",
#     ]
#     # Follow your links across all pages to optimize the fonts across the entire site
#     recursive = true
#     # Subfont lets you set CSS font-display value of the optimized subsets
#     # See https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/font-display
#     fontDisplay = "swap"
#     # Inline generated CSS @font-face blocks into each page
#     # When set to `false` an external CSS file will be created
#     inlineCss = false
#     # Inline generated font subsets into their respective @font-face blocks
#     # When set to `false` external font files will be created
#     inlineFonts = false
#     # Include fallbacks so the original font will be loaded when dynamic content gets injected at runtime
#     # When set to `false` external font files will be created
#     fallbacks = true